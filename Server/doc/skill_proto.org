#+OPTIONS: ^:{}

* 怪物攻击
** 近战必然命中技能, 例如恶霸-近战长刀-普攻
1. *服务端广播* 技能立即命中消息MSG_ID_SKILL_HIT_IMMEDIATE_NOTIFY
2. 客户端播放技能动画，并读表做延迟显示伤害

** 远程必然命中技能，例如土匪-远程弓箭-普攻
1. *服务端广播* 技能立即命中消息MSG_ID_SKILL_HIT_IMMEDIATE_NOTIFY
2. 客户端播放技能动画并等待技能命中
3. 客户端显示伤害

** 延迟判断命中技能，例如BOSS-近战柱子-技能1
1. *服务端广播* 技能释放消息MSG_ID_SKILL_CAST_NOTIFY
2. 客户端播放技能动作
3. 服务端判定命中
4. *服务端广播* 技能命中消息MSG_ID_SKILL_HIT_NOTIFY
5. 客户端显示伤害

* 人物攻击
** 必然命中技能, 目前没有该类型技能
1. 客户端发送技能命中消息MSG_ID_SKILL_HIT_REQUEST
2. *服务端广播* 技能命中消息MSG_ID_SKILL_HIT_NOTIFY
3. 客户端区分近战和远程延迟显示伤害

** 延迟命中技能, 例如大刀-怒云斩带击倒/击飞
1. 客户端发送技能释放消息MSG_ID_SKILL_CAST_REQUEST
2. *服务端广播* 技能释放消息MSG_ID_SKILL_CAST_NOTIFY
3. 客户端判定技能命中
4. 客户端发送技能命中消息MSG_ID_SKILL_HIT_REQUEST
5. 服务端计算伤害和击飞击退等效果
6. *服务端广播* 技能命中消息MSG_ID_SKILL_HIT_NOTIFY
7. 客户端显示伤害和击飞击退效果
8. 有些技能是有多段伤害的，比如大刀-旋风斩，弓箭技能3，这会导致4-7的广播过程发生很多次。

** 客户端召唤释放技能, 例如毛笔男-墨飞龙舞
1. 客户端发送技能释放消息MSG_ID_SKILL_CAST_REQUEST
2. *服务端广播* 技能释放消息MSG_ID_SKILL_CAST_NOTIFY
3. 客户端判定召唤物攻击
4. 客户端发送召唤物攻击消息MSG_ID_CALL_ATTACK_REQUEST
5. 服务端计算伤害和击飞击退等效果
6. *服务端广播* 技能命中消息MSG_ID_CALL_ATTACK_NOTIFY
7. 客户端显示伤害和击飞击退效果


** 位移技能, 例如大刀-滚地
1. 客户端发送位移技能释放消息MSG_ID_SKILL_MOVE_REQUEST
2. *服务端广播* 位移技能释放消息MSG_ID_SKILL_MOVE_NOTIFY
3. 所有客户端播放技能动作，主角做位移到目的地
4. 客户端发送移动停止消息MSG_ID_MOVE_STOP_REQUEST
5. *服务端广播* 移动停止消息MSG_ID_MOVE_STOP_NOTIFY
6. 所有客户端播放技能位移到目的地

* 优化建议
1. 目前人物没有必然命中类型的技能, 如果把部分技能改成这种，可以减少一次广播.
2. 人物位移技能中，客户端在发送MSG_ID_SKILL_MOVE_REQUEST的时候就计算出位移目的地址，直接发送给服务端做广播，或者由服务端计算位移的目的地址，节约一次广播量.
3. 人物延迟命中技能的多段伤害会导致多次的广播消息，请注意控制使用.

* 尚未完成
1. 目前测试都是在内网稳定，低延迟网络环境下的测试，需要模拟外网网络环境测试效果，比如稳定的50MS延迟环境，100-200MS延迟之间波动的网络环境.
2. 恐惧，禁锢等控制类技能, 目前没有配置，程序也没有实现.
3. 目前玩家和怪物速度客户端没有使用服务端的数据，服务端也没有广播速度变化, 因此加速减速效果目前无法实现.




